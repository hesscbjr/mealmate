# Utilities (`utils/`)

(Generated by Gemini 2.5 Pro)

This directory contains helper functions and utility modules used across the application.

## Purpose

Utilities encapsulate reusable, often pure, logic that doesn't belong to a specific component, hook, or service. This promotes DRY (Don't Repeat Yourself) principles and keeps other modules focused on their primary responsibilities.

## Files

### `fileSystem.ts`

- **Purpose**: Provides functions for interacting with the device file system, primarily using `expo-file-system`.
- **Exports**:
  - `readFileAsBase64(uri: string): Promise<string>`: Reads the file at the given URI and returns its content as a base64 encoded string. Used to prepare images for the OpenAI API.
- **Usage**: Called within hooks or services that need to process local files (e.g., `useIngredientExtraction`).

### `formatters.ts`

- **Purpose**: Contains functions for formatting data for display.
- **Exports**:
  - `formatIngredientList(ingredients: string[]): string`: Takes an array of ingredient strings, capitalizes the first letter of each word in each ingredient, and joins them into a single comma-separated string.
- **Usage**: Used in components displaying lists of ingredients (e.g., `IngredientListDisplay`).

### `shuffleArray.ts`

- **Purpose**: Provides a function to randomize the order of elements in an array.
- **Exports**: `shuffleArray<T>(array: T[]): T[]`
  - Takes an array of any type (`T`).
  - Returns a _new_ array with the elements randomly shuffled using the Fisher-Yates (Knuth) algorithm.
  - Does _not_ modify the original array.
- **Usage**: Useful for randomizing lists, such as loading messages (`LoadingOverlay`) or potentially recipe suggestions before displaying them.

### `textUtils.ts`

- **Purpose**: Contains functions for processing and manipulating text strings.
- **Exports**:
  - `parseAndLinkSummary(summaryHtml: string | null): ParsedSummary`: Takes an HTML summary string (likely from Spoonacular), extracts the main summary text (stripping HTML), identifies embedded related recipe links (`<a href="...ID">TEXT</a>`), and returns an object `{ summaryText: string, relatedRecipes: RelatedRecipeLink[] }` where `RelatedRecipeLink` is `{ id: string, title: string }`.
- **Usage**: Used in the recipe detail screen (`app/recipe/[id].tsx`) to process the summary from Spoonacular.

### `linking.ts`

- **Purpose**: Generates app-specific deep links.
- **Exports**:
  - `createRecipeLink(recipeId: string | number): string`: Returns a URL (using the configured scheme) that navigates directly to the given recipe ID.
- **Usage**: Utilized when sharing recipes so that the link will open the recipe inside the app.

## Development Guidelines

- Functions should be pure (predictable output for the same input, no side effects) whenever possible.
- Keep functions small and focused on a single task.
- Use clear function and parameter names.
- Add JSDoc comments to explain the purpose, parameters, and return values of exported functions.
- Avoid dependencies on specific components, hooks, or UI elements.

## Usage Examples

```typescript
import { shuffleArray } from "@/utils/shuffleArray";
import { formatIngredientList } from "@/utils/formatters";

// Shuffling messages
const originalMessages = ["Msg 1", "Msg 2", "Msg 3"];
const shuffled = shuffleArray(originalMessages);

// Formatting ingredients
const ingredients = ["chicken breast", "olive oil", "garlic powder"];
const formatted = formatIngredientList(ingredients);
// formatted might be "Chicken Breast, Olive Oil, Garlic Powder"
```
