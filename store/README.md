# Store Directory (`store/`)

(Generated by Gemini 2.5 Pro)

## Purpose

This directory contains global state management logic for the MealMate application using Zustand, a small, fast, and scalable state management solution.

## Key Stores / Files

### `user.ts`

- **Purpose**: Manages user-specific information and preferences.
- **State Properties**:
  - `firstName: string`: User's first name.
  - `lastName: string`: User's last name.
  - `completedOnboarding: boolean`: Flag indicating if the user has finished the onboarding flow.
  - `recipeSortPreference: RecipeSortPreference`: User's preferred sorting method for recipe suggestions (`'max-used-ingredients'` or `'min-missing-ingredients'`).
  - `themePreference: ThemePreference`: User's preferred theme (`'light'`, `'dark'`, or `'system'`).
- **Actions**:
  - `setFullName(firstName, lastName)`: Updates the user's name.
  - `markOnboardingComplete()`: Sets `completedOnboarding` to `true`.
  - `setRecipeSortPreference(preference)`: Updates the recipe sort preference.
  - `setThemePreference(preference)`: Updates the theme preference.
- **Persistence**: Uses Zustand's `persist` middleware with `AsyncStorage` under the key `mealmate:user`.

### `recipes.ts`

- **Purpose**: Manages state related to recipes, specifically starred recipes.
- **State Properties**:
  - `starred: SpoonacularRecipe[]`: An array holding the full recipe objects that the user has starred.
- **Actions**:
  - `toggleStar(recipe)`: Adds or removes a recipe from the `starred` array. If adding, it prepends the recipe to the start of the array.
  - `isStarred(id)`: Checks if a recipe with the given ID exists in the `starred` array.
- **Persistence**: Uses Zustand's `persist` middleware with `AsyncStorage` under the key `mealmate:starred-recipes`.

## Configuration Requirements

Ensure `@react-native-async-storage/async-storage` and `zustand` are installed:

```bash
npm install zustand @react-native-async-storage/async-storage
# or
yarn add zustand @react-native-async-storage/async-storage
```

## Development Guidelines

- Each distinct slice of global state should reside in its own store file (e.g., `user.ts`, `recipes.ts`).
- Use descriptive names for stores, state properties, and actions.
- Leverage Zustand middleware (like `persist`) where appropriate.
- Keep state structures as flat as reasonably possible.

## Usage

Import the hook exported by the store file to access state and actions in components or other hooks:

```typescript
import { useUserStore } from "@/store/user";
import { useRecipeStore } from "@/store/recipes";

function MyComponent() {
  const { firstName, themePreference, setThemePreference } = useUserStore();
  const { starred, toggleStar } = useRecipeStore();

  // ... component logic accessing state (firstName, themePreference, starred) ...
  // ... and calling actions (setThemePreference, toggleStar) ...
}
```
